; Enhanced PHP Performance Configuration for Employee Management System
; Add these settings to your php.ini file or include this file

; OPcache Configuration for better performance
[opcache]
; Enable OPcache
opcache.enable=1
opcache.enable_cli=1

; Memory settings - Increased for better performance
opcache.memory_consumption=512
opcache.interned_strings_buffer=32
opcache.max_accelerated_files=40000

; Performance settings
opcache.revalidate_freq=0
opcache.validate_timestamps=0
opcache.save_comments=1
opcache.fast_shutdown=1
opcache.enable_file_override=1

; Enable file cache for better performance
opcache.file_cache=/tmp/opcache
opcache.file_cache_only=0

; Preloading (requires PHP 7.4+)
; opcache.preload=/workspace/preload.php
; opcache.preload_user=www-data

; Additional PHP optimizations
[PHP]
; Increase memory limit for better performance
memory_limit=1024M

; Increase execution time for complex operations
max_execution_time=600

; Increase input limits
max_input_vars=5000
max_input_time=600

; File upload optimizations
upload_max_filesize=100M
post_max_size=100M

; Session optimizations
session.gc_maxlifetime=14400
session.gc_probability=1
session.gc_divisor=1000
session.cookie_httponly=1
session.cookie_secure=1
session.use_strict_mode=1

; Output buffering for better performance
output_buffering=8192
zlib.output_compression=On
zlib.output_compression_level=9

; Date timezone
date.timezone=UTC

; Error handling (disable in production)
display_errors=Off
log_errors=On
error_log=/var/log/php_errors.log
error_reporting=E_ALL & ~E_DEPRECATED & ~E_STRICT

; Realpath cache for better file system performance
realpath_cache_size=8192k
realpath_cache_ttl=7200

; Additional extensions for performance
extension=mysqli
extension=mbstring
extension=intl
extension=redis
extension=opcache
extension=zip

; Database optimizations
mysqli.allow_persistent=On
mysqli.max_persistent=100
mysqli.max_links=100
mysqli.cache_size=2000
mysqli.default_port=3306
mysqli.reconnect=Off

; Mail optimizations
sendmail_path=/usr/sbin/sendmail -t -i
mail.add_x_header=Off

; Security optimizations
expose_php=Off
allow_url_fopen=Off
allow_url_include=Off
file_uploads=On
max_file_uploads=20

; Performance monitoring
auto_globals_jit=On
opcache.jit_buffer_size=128M
opcache.jit=1255

; Additional performance settings
ignore_repeated_errors=On
ignore_repeated_source=On
log_errors_max_len=1024